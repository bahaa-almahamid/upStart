{% extends 'base.html.twig' %}

{% block title %}

{% endblock %}



{% block main %}

<div class="white">
    <div class="posting">
            {{ form_start(postForm) }}
                {{ form_row(postForm.category) }}
                {{ form_row(postForm.title) }}
                {{ form_row(postForm.text) }}
            {{ form_end(postForm) }}
    </div>

    {% if posts.getTotalItemCount == 0 %}
        <p>No Post found in the application</p>
    {% else %}
        {% for post in posts %}
            <div class="post-user-display" >
                {% if post.getUser.getPicture() is not empty %}
                <div class='user-pic-div'><img class="post-user-pic"  src="{{ path('download_document', {'document' : post.getUser.getPicture().getId()}) }}"> </div>
    			{% else %}
    			<div></div>
    			{% endif %}
                <div class="post-user-display-username"> {{ post.getUser.getUsername() }} </div>
            </div>
            <div class = "post-container">
                {% if post.getPicture() is not empty %}
                    <div class="post-pic-container"><img class= 'post-pic' src="{{ path('download_document', {'document' : post.getPicture().getId()}) }}"></div>
                {% else %}
                    <div></div>
                {% endif %}
                <p class="creation-date-show">Created at:&nbsp {{ post.getCreationDate()| date('Y-m-d H:i:s') }}| Category:&nbsp{{ post.getCategory() }}</p>
                <h3 class="title-show">{{ post.getTitle() }}</h3>
                <p class="body-show">{{ post.getText() }}<p>
                <p class="post-detail-show"><a class="click-link" href="{{ path("post_detail", {post: post.getId()}) }}">Comments</a></p>
                
                {% if app.user == post.getUser() %}
                <p class="post-edit-show"><a class="click-link" href="{{ path("post_edit", {post: post.getId()}) }}">Edit Post</a></p>
                <p class="post-delete-show"><a class="click-link" href="{{ path("delete_post", {post: post.getId()}) }}">Delete Post</a></p>
                {% endif %}
             </div>
            <div class="navigation">
                {{ knp_pagination_render(posts) }}
            </div>
        {% endfor %}
    {% endif %}
</div>