{% extends 'base.html.twig' %}

{% block title %}upSTART.lu{% endblock %}

{% block body %}
		{% block left_marge %}
                    <div id="left-navbar">
                        {% if is_granted('ROLE_USER') %}
                        <a href="{{ path ('profile') }}"><i class="fas fa-user-alt"></i>  My profile | </a>
                        <br>
                        <br>
                        <a href="{{ path ('Chat') }}"><i class="fas fa-envelope"></i>   Messages | </a>
                        <br>
                        <br>                        
                        <a href = "{{path ('post') }}"><i class="fas fa-list-alt"></i>  Posts | <a/>
                        <br>
                        <br>
                        {% if is_granted('ROLE_ADMIN') %}
                            <a href = "{{path ('admin') }}"><i class="fas fa-columns"></i>  Admin panel | <a/>
                        {% endif %}
                        
                    {% endif %}
                    </div>               
		{% endblock %}
		<div class='timeline-container'>
		<h2 class = "title">Global Chat</h2>
				{% if messages is empty %}
					<p>No messages found in the application</p>
				{% else %}
				<div id='message-container' class='message-container'>
					{% for message in messages %}
						<p class='msg-username'>{{ message.getUser.getUsername() }}</p>          				
						<p class='msg-content'>{{ message.getContent() }}</p>   
						<p class='msg-date'>{{ message.getCreateDate()| date('Y-m-d H:i:s') }}</p>     
					{% endfor %}
				</div>
		{% endif %}
		<div class='messenger-form'>
			{{ form_start(chatForm) }}
			{{ form_row(chatForm.content) }}
			<button type="submit" class="login-form-submit" > Send </button>
			{{ form_end(chatForm) }}
		</div>
		</div>
		
	

{% endblock %}
